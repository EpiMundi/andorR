<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Optimisation of AND-OR Decision Trees • andorR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimisation of AND-OR Decision Trees">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">andorR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reference" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reference</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reference">
<li><a class="dropdown-item" href="../reference/index.html">Index</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/andorR-intro.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/data-formats.html">Data formats</a></li>
    <li><a class="dropdown-item" href="../articles/tree-optimisation.html">Tree optimisation</a></li>
    <li><a class="dropdown-item" href="../articles/confidence-boosting.html">Confidence boosting</a></li>
    <li><a class="dropdown-item" href="../articles/example-data-files.html">Example data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Optimisation of AND-OR Decision Trees</h1>
            
      

      <div class="d-none name"><code>tree-optimisation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="the-need-for-optimisation">The Need for Optimisation<a class="anchor" aria-label="anchor" href="#the-need-for-optimisation"></a>
</h2>
<p>Decisions based on complex criteria, like a medical diagnosis or an
ethical investment, often require a lot of effort. Answering each
question involves gathering evidence, which can be expensive, invasive,
or time-consuming. The goal is to reach a correct and confident
conclusion by asking the <strong>fewest possible questions</strong>.</p>
<p>The <code>andorR</code> package provides a strategy for this by
calculating an <strong>influence index</strong> for each unanswered
question. This index quantifies how much a question, if answered, is
likely to help resolve the entire tree. It provides a logical path to
the conclusion, ensuring you’re always working on the most impactful
piece of the puzzle. This process also embraces
<strong>uncertainty</strong>, allowing you to provide answers with
varying levels of confidence and to revisit uncertain answers later to
strengthen the final result.</p>
</div>
<div class="section level2">
<h2 id="the-influence-index-algorithm">The Influence Index Algorithm<a class="anchor" aria-label="anchor" href="#the-influence-index-algorithm"></a>
</h2>
<p>The optimisation process works in two stages. First, it assigns
indices to the parent (non-leaf) nodes. Second, it uses those parent
indices to calculate the final <code>influence_index</code> for each
unanswered leaf (question).</p>
<div class="section level3">
<h3 id="parent-node-indices-true_index-and-false_index">1. Parent Node Indices: <code>true_index</code> and
<code>false_index</code><a class="anchor" aria-label="anchor" href="#parent-node-indices-true_index-and-false_index"></a>
</h3>
<p>Every <code>AND</code> or <code>OR</code> node is assigned two values
that represent the probability of an answer propagating up through that
node. The calculation depends on the node’s logical rule and the number
of its <em>unanswered</em> children
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>).</p>
<ul>
<li>
<strong>AND Nodes:</strong> For an <code>AND</code> node to become
<code>TRUE</code>, all its children must be <code>TRUE</code>. Answering
one child <code>TRUE</code> makes little progress. However, answering
just one child <code>FALSE</code> immediately makes the <code>AND</code>
node <code>FALSE</code> (this is called a short-circuit). Therefore:
<ul>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>a</mi><mi>l</mi><mi>s</mi><mi>e</mi><mi>_</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo>=</mo><mn>1.0</mn></mrow><annotation encoding="application/x-tex">false\_index = 1.0</annotation></semantics></math>
(high impact)</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mi>_</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo>=</mo><mn>1</mn><mi>/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">true\_index = 1 / n</annotation></semantics></math>
(impact is diluted by the other children)</li>
</ul>
</li>
<li>
<strong>OR Nodes:</strong> The logic is reversed. For an
<code>OR</code> node to become <code>TRUE</code>, only one child needs
to be <code>TRUE</code>. To make it <code>FALSE</code>, all children
must be <code>FALSE</code>. Therefore:
<ul>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mi>_</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo>=</mo><mn>1.0</mn></mrow><annotation encoding="application/x-tex">true\_index = 1.0</annotation></semantics></math>
(high impact)</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>a</mi><mi>l</mi><mi>s</mi><mi>e</mi><mi>_</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>x</mi><mo>=</mo><mn>1</mn><mi>/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">false\_index = 1 / n</annotation></semantics></math>
(impact is diluted)</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="leaf-node-influence_index">2. Leaf Node <code>influence_index</code><a class="anchor" aria-label="anchor" href="#leaf-node-influence_index"></a>
</h3>
<p>A leaf’s total influence is its potential to affect the final
outcome. This is calculated by multiplying the indices of all its
ancestors up to the root for both the <code>TRUE</code> and
<code>FALSE</code> pathways, and then summing them.</p>
<p>The formula is:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mi>n</mi><mi>f</mi><mi>l</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mo>∏</mo><mtext mathvariant="normal">ancestor true_indices</mtext><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mrow><mo stretchy="true" form="prefix">(</mo><mo>∏</mo><mtext mathvariant="normal">ancestor false_indices</mtext><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Influence = (\prod \text{ancestor true_indices}) + (\prod \text{ancestor false_indices})</annotation></semantics></math></p>
<p>This score represents the combined probability of the leaf’s answer
propagating up to the root and helping to resolve the final conclusion.
The leaf with the highest score is the most strategic question to
investigate next, if the outcome of the tree is considered neutral.</p>
</div>
<div class="section level3">
<h3 id="prioritisation-strategies-in-practice">3. Prioritisation strategies in practice<a class="anchor" aria-label="anchor" href="#prioritisation-strategies-in-practice"></a>
</h3>
<p>The list of prioritised questions is calculated using the
<code><a href="../reference/get_highest_influence.html">get_highest_influence()</a></code> function. This takes an optional
parameter <code>sort_by</code> which can have the following values:</p>
<ul>
<li>“TRUE” :
<ul>
<li>Sort by the influence the question has if a <strong>TRUE</strong>
response is provided. This can be thought of as a
<strong>rule-in</strong> strategy, minimising the number of questions
required if the objective is to acheive a TRUE answer for the entire
tree.</li>
<li>If the <code>influence_if_true</code> of a question is equal to 1,
then answering that single question with TRUE will resolve the entire
tree with TRUE</li>
</ul>
</li>
<li>“FALSE” :
<ul>
<li>Sort by the influence the question has if a <strong>FALSE</strong>
response is provided. This can be thought of as a
<strong>rule-out</strong> strategy, minimising the number of questions
required if the objective is to acheive a FALSE answer for the entire
tree.</li>
<li>If the <code>influence_if_false</code> of a question is equal to 1,
then answering that single question with FALSE will resolve the entire
tree with FALSE.</li>
</ul>
</li>
<li>“BOTH” :
<ul>
<li>The default. Sort by the sum of the two previous values, giving a
summary measure of influence if we are <strong>neutral</strong> about
the tree outcome.</li>
</ul>
</li>
</ul>
<p>The strategy used in the interactive analysis can also be set using
the <code>sort_by</code> parameter.</p>
</div>
</div>
<div class="section level2">
<h2 id="a-worked-example">A Worked Example<a class="anchor" aria-label="anchor" href="#a-worked-example"></a>
</h2>
<p>Let’s walk through the process using the <code>ethical</code>
investment tree included with this package.</p>
<div class="section level3">
<h3 id="step-1-load-and-prepare-the-tree">Step 1: Load and Prepare the Tree<a class="anchor" aria-label="anchor" href="#step-1-load-and-prepare-the-tree"></a>
</h3>
<p>We start by loading the package and the <code>ethical</code> dataset,
then use <code><a href="../reference/load_tree_df.html">load_tree_df()</a></code> to build the tree object.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://EpiMundi.github.io/andorR" class="external-link">andorR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load the built-in ethical dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ethical</span><span class="op">)</span></span>
<span><span class="va">dtree</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tree_df.html">load_tree_df</a></span><span class="op">(</span><span class="va">ethical</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2-calculate-the-indices">Step 2: Calculate the Indices<a class="anchor" aria-label="anchor" href="#step-2-calculate-the-indices"></a>
</h3>
<p>The <code><a href="../reference/update_tree.html">update_tree()</a></code> function is a convenient wrapper that
runs all the necessary calculations in the correct order: it calculates
the logical state of the tree, assigns the <code>true_index</code> and
<code>false_index</code> to all parent nodes, and then calculates the
<code>influence_index</code> for all unanswered leaves.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate all indices for the initial state</span></span>
<span><span class="va">dtree</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/update_tree.html">update_tree</a></span><span class="op">(</span><span class="va">dtree</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-display-and-interpret-the-results">Step 3: Display and Interpret the Results<a class="anchor" aria-label="anchor" href="#step-3-display-and-interpret-the-results"></a>
</h3>
<p>We can now print the tree to see the calculated indices. Notice that
parent nodes have a <code>true_index</code> and
<code>false_index</code>, while only the unanswered leaves have an
<code>influence_index</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">120</span><span class="op">)</span></span>
<span><span class="co"># We rename the column header for better display</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">dtree</span>, <span class="st">"rule"</span>, <span class="st">"true_index"</span>, <span class="st">"false_index"</span>, influence <span class="op">=</span> <span class="st">"influence_index"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                    levelName rule true_index false_index influence</span></span>
<span><span class="co">#&gt; 1  Invest in Company X                        AND  0.2500000   1.0000000        NA</span></span>
<span><span class="co">#&gt; 2   ¦--Financial Viability                    AND  0.5000000   1.0000000        NA</span></span>
<span><span class="co">#&gt; 3   ¦   ¦--Profitability and Growth Signals    OR  1.0000000   0.3333333        NA</span></span>
<span><span class="co">#&gt; 4   ¦   ¦   ¦--FIN1                                       NA          NA 0.4583333</span></span>
<span><span class="co">#&gt; 5   ¦   ¦   ¦--FIN2                                       NA          NA 0.4583333</span></span>
<span><span class="co">#&gt; 6   ¦   ¦   °--FIN3                                       NA          NA 0.4583333</span></span>
<span><span class="co">#&gt; 7   ¦   °--Solvency and Stability             AND  0.5000000   1.0000000        NA</span></span>
<span><span class="co">#&gt; 8   ¦       ¦--FIN4                                       NA          NA 1.0625000</span></span>
<span><span class="co">#&gt; 9   ¦       °--FIN5                                       NA          NA 1.0625000</span></span>
<span><span class="co">#&gt; 10  ¦--Acceptable Environmental Stewardship    OR  1.0000000   0.5000000        NA</span></span>
<span><span class="co">#&gt; 11  ¦   ¦--Has a Clean Current Record         AND  0.3333333   1.0000000        NA</span></span>
<span><span class="co">#&gt; 12  ¦   ¦   ¦--ENV1                                       NA          NA 0.5833333</span></span>
<span><span class="co">#&gt; 13  ¦   ¦   ¦--ENV2                                       NA          NA 0.5833333</span></span>
<span><span class="co">#&gt; 14  ¦   ¦   °--ENV3                                       NA          NA 0.5833333</span></span>
<span><span class="co">#&gt; 15  ¦   °--Has a Credible Transition Pathway   OR  1.0000000   0.3333333        NA</span></span>
<span><span class="co">#&gt; 16  ¦       ¦--ENV4                                       NA          NA 0.4166667</span></span>
<span><span class="co">#&gt; 17  ¦       ¦--ENV5                                       NA          NA 0.4166667</span></span>
<span><span class="co">#&gt; 18  ¦       °--ENV6                                       NA          NA 0.4166667</span></span>
<span><span class="co">#&gt; 19  ¦--Demonstrable Social Responsibility      OR  1.0000000   0.5000000        NA</span></span>
<span><span class="co">#&gt; 20  ¦   ¦--Shows Excellent Internal Culture    OR  1.0000000   0.2500000        NA</span></span>
<span><span class="co">#&gt; 21  ¦   ¦   ¦--SOC1                                       NA          NA 0.3750000</span></span>
<span><span class="co">#&gt; 22  ¦   ¦   ¦--SOC2                                       NA          NA 0.3750000</span></span>
<span><span class="co">#&gt; 23  ¦   ¦   ¦--SOC3                                       NA          NA 0.3750000</span></span>
<span><span class="co">#&gt; 24  ¦   ¦   °--SOC4                                       NA          NA 0.3750000</span></span>
<span><span class="co">#&gt; 25  ¦   °--Has a Positive External Impact     AND  0.3333333   1.0000000        NA</span></span>
<span><span class="co">#&gt; 26  ¦       ¦--SOC5                                       NA          NA 0.5833333</span></span>
<span><span class="co">#&gt; 27  ¦       ¦--SOC6                                       NA          NA 0.5833333</span></span>
<span><span class="co">#&gt; 28  ¦       °--SOC7                                       NA          NA 0.5833333</span></span>
<span><span class="co">#&gt; 29  °--Strong Corporate Governance            AND  0.2000000   1.0000000        NA</span></span>
<span><span class="co">#&gt; 30      ¦--GOV1                                           NA          NA 1.0500000</span></span>
<span><span class="co">#&gt; 31      ¦--GOV2                                           NA          NA 1.0500000</span></span>
<span><span class="co">#&gt; 32      ¦--GOV3                                           NA          NA 1.0500000</span></span>
<span><span class="co">#&gt; 33      ¦--GOV4                                           NA          NA 1.0500000</span></span>
<span><span class="co">#&gt; 34      °--GOV5                                           NA          NA 1.0500000</span></span></code></pre></div>
<p>To find the best question to ask first, we use
<code><a href="../reference/get_highest_influence.html">get_highest_influence()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_highest_influence.html">get_highest_influence</a></span><span class="op">(</span><span class="va">dtree</span>, top_n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   name                                                    question influence_if_true influence_if_false influence_index</span></span>
<span><span class="co">#&gt; 1 FIN4         Debt-to-Equity ratio is below the industry average.            0.0625                  1          1.0625</span></span>
<span><span class="co">#&gt; 2 FIN5       Company generates strong and positive free cash flow.            0.0625                  1          1.0625</span></span>
<span><span class="co">#&gt; 3 GOV1 The board of directors is majority independent and diverse.            0.0500                  1          1.0500</span></span></code></pre></div>
<p>In this initial state, <strong>FIN4</strong>, <strong>FIN5</strong>,
and <strong>GOV1</strong> (and other leaves under <code>AND</code>
nodes) have the highest influence. This is because they belong to
<code>AND</code> groups directly under the root. A single
<code>FALSE</code> answer to any of them has a high probability of
making a major branch of the tree <code>FALSE</code>, thus contributing
significantly to the final answer. The tool correctly identifies these
as the most efficient questions to investigate first.</p>
</div>
<div class="section level3">
<h3 id="step-4-observing-dynamic-re-prioritization">Step 4: Observing Dynamic Re-Prioritization<a class="anchor" aria-label="anchor" href="#step-4-observing-dynamic-re-prioritization"></a>
</h3>
<p>Let’s focus on some of the Financial questions:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a full list of all question statuses</span></span>
<span><span class="va">all_questions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/print_questions.html">print_questions</a></span><span class="op">(</span><span class="va">dtree</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Let's look at the initial influence of FIN1, FIN2, and FIN4</span></span>
<span><span class="va">all_questions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FIN1"</span>, <span class="st">"FIN2"</span>, <span class="st">"FIN4"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="44%">
<col width="5%">
<col width="8%">
<col width="13%">
<col width="13%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">question</th>
<th align="left">answer</th>
<th align="right">confidence</th>
<th align="right">influence_if_true</th>
<th align="right">influence_if_false</th>
<th align="right">influence_index</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">FIN1</td>
<td align="left">Company demonstrates consistent, high revenue
growth.</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0.1250</td>
<td align="right">0.3333333</td>
<td align="right">0.4583333</td>
</tr>
<tr class="even">
<td align="left">FIN2</td>
<td align="left">Company maintains a high net profit margin for its
industry.</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0.1250</td>
<td align="right">0.3333333</td>
<td align="right">0.4583333</td>
</tr>
<tr class="odd">
<td align="left">FIN4</td>
<td align="left">Debt-to-Equity ratio is below the industry
average.</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0.0625</td>
<td align="right">1.0000000</td>
<td align="right">1.0625000</td>
</tr>
</tbody>
</table>
<p>Now, let’s provide an answer and see how the priorities change. We
will answer <code>FIN1</code> (which is under an <code>OR</code> node)
as <code>TRUE</code>. This should resolve its parent node,
“Profitability and Growth Signals”.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Answer a question and then run update_tree() again</span></span>
<span><span class="fu"><a href="../reference/set_answer.html">set_answer</a></span><span class="op">(</span><span class="va">dtree</span>, <span class="st">"FIN1"</span>, <span class="cn">TRUE</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Answer for leaf 'FIN1' set to: TRUE with confidence 5/5</span></span>
<span><span class="va">dtree</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/update_tree.html">update_tree</a></span><span class="op">(</span><span class="va">dtree</span><span class="op">)</span></span></code></pre></div>
<p>Now that the tree has been recalculated, let’s check the influence
scores for the same leaves again.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the new list of all question statuses</span></span>
<span><span class="va">all_questions_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/print_questions.html">print_questions</a></span><span class="op">(</span><span class="va">dtree</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Look at the new influence of FIN2 and FIN4</span></span>
<span><span class="va">all_questions_new</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FIN1"</span>, <span class="st">"FIN2"</span>, <span class="st">"FIN4"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="44%">
<col width="5%">
<col width="8%">
<col width="13%">
<col width="13%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">question</th>
<th align="left">answer</th>
<th align="right">confidence</th>
<th align="right">influence_if_true</th>
<th align="right">influence_if_false</th>
<th align="right">influence_index</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">FIN1</td>
<td align="left">Company demonstrates consistent, high revenue
growth.</td>
<td align="left">TRUE</td>
<td align="right">5</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">FIN2</td>
<td align="left">Company maintains a high net profit margin for its
industry.</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0.250</td>
<td align="right">0.5</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">FIN4</td>
<td align="left">Debt-to-Equity ratio is below the industry
average.</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0.125</td>
<td align="right">1.0</td>
<td align="right">1.125</td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="analysis-of-the-change">Analysis of the Change<a class="anchor" aria-label="anchor" href="#analysis-of-the-change"></a>
</h4>
<ul>
<li><p><strong>FIN2</strong>: The influence index for <code>FIN2</code>
is now <code>NA</code>. This is because its parent node (“Profitability
and Growth Signals”) was an <code>OR</code> node. Since we answered its
sibling <code>FIN1</code> as <code>TRUE</code>, the parent node is now
resolved as <code>TRUE</code>. Answering <code>FIN2</code> can no longer
change the outcome of that branch, so its influence has correctly become
irrelevant.</p></li>
<li><p><strong>FIN4</strong>: Conversely, the influence index for
<code>FIN4</code> has <strong>increased</strong>. Because the
“Profitability” branch is now resolved, the final outcome of the
higher-level “Financial Viability” <code>AND</code> node now depends
entirely on resolving the “Solvency and Stability” branch. This makes
the questions under it, like <code>FIN4</code>, more critical than they
were before.</p></li>
</ul>
<p>This dynamic re-prioritization is the core feature of the
<code>andorR</code> optimisation algorithm.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps-boosting-confidence">Next Steps: Boosting Confidence<a class="anchor" aria-label="anchor" href="#next-steps-boosting-confidence"></a>
</h2>
<p>Once enough questions have been answered to reach a <code>TRUE</code>
or <code>FALSE</code> conclusion at the root, the focus of the analysis
shifts. The goal is no longer to find the answer, but to increase the
<strong>confidence</strong> in the answer you have. <code>andorR</code>
provides a separate function for this phase of the analysis.</p>
<p>For a detailed guide, see the “Confidence Boosting and Sensitivity
Analysis” vignette:
<code><a href="../articles/confidence-boosting.html">vignette("confidence-boosting", package = "andorR")</a></code> ```</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Angus R Cameron.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
