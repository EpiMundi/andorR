% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main_functions.R
\name{calculate_tree}
\alias{calculate_tree}
\title{Propagate Answers and Confidence Up the Tree}
\usage{
calculate_tree(tree)
}
\arguments{
\item{tree}{The `data.tree` object to be calculated. The function modifies
this object directly.}
}
\value{
The modified `tree` object (returned invisibly).
}
\description{
This function performs a full, bottom-up recalculation of the decision tree's
state. It takes the user-provided answers and confidences at the leaf level
and propagates the logical outcomes (`answer`) and aggregate confidence scores
up to the parent nodes based on their `AND`/`OR` rules.
}
\details{
The function first resets the `answer` and `confidence` of all non-leaf nodes
to `NA` to ensure a clean calculation.

It then uses a **post-order traversal**, which is critical as it guarantees
that a parent node is only processed after all of its children have been processed.

The logical rules are applied with short-circuiting:
- **OR Nodes:** Become `TRUE` if any child is `TRUE`. Become `FALSE` only if
  all children are answered and none are `TRUE`.
- **AND Nodes:** Become `FALSE` if any child is `FALSE`. Become `TRUE` only if
  all children are answered and none are `FALSE`.

The confidence calculation is based on the confidences of the children that
determined the outcome (e.g., only the `TRUE` children for a resolved `OR` node).
}
