<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Formats for andorR • andorR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Formats for andorR">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">andorR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/andorR-intro.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/data-formats.html">Data formats</a></li>
    <li><a class="dropdown-item" href="../articles/tree-optimisation.html">Tree optimisation</a></li>
    <li><a class="dropdown-item" href="../articles/confidence-boosting.html">Confidence boosting</a></li>
    <li><a class="dropdown-item" href="../articles/example-data-files.html">Example data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Data Formats for andorR</h1>
            
      

      <div class="d-none name"><code>data-formats.Rmd</code></div>
    </div>

    
    
<p>The <code>andorR</code> package is designed to be flexible, allowing
you to define your decision tree structure in several different formats
depending on your preference and source data. This guide explains the
three primary formats and the functions used to load them.</p>
<p>The examples below use the <code>ethical</code> investment decision
tree, which is included as a dataset within this package.</p>
<div class="section level2">
<h2 id="the-hierarchical-format-yaml-or-json">1. The Hierarchical Format (YAML or JSON)<a class="anchor" aria-label="anchor" href="#the-hierarchical-format-yaml-or-json"></a>
</h2>
<p>This is often the most intuitive and human-readable format, as its
indented structure visually represents the tree’s hierarchy. It is
highly recommended for creating and managing trees in a text editor.</p>
<p><strong>Required Fields:</strong></p>
<ul>
<li>
<code>name</code>: The name of the node.</li>
<li>
<code>nodes</code>: A list of child nodes (this key is used instead
of the reserved word <code>children</code>).</li>
<li>
<code>rule</code> : Required for parent nodes, can be
<strong>AND</strong> or <strong>OR</strong>
</li>
<li>
<code>question</code> : Required for leaf nodes</li>
</ul>
<div class="section level3">
<h3 id="yaml-format">YAML format<a class="anchor" aria-label="anchor" href="#yaml-format"></a>
</h3>
<p>An excerpt from a YAML file (<code>ethical.yml</code>) looks like
this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Invest in Company X</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">rule</span><span class="kw">:</span><span class="at"> AND</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">nodes</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Financial Viability</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="at">    </span><span class="fu">rule</span><span class="kw">:</span><span class="at"> AND</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">    </span><span class="fu">nodes</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Profitability and Growth Signals</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">        </span><span class="fu">rule</span><span class="kw">:</span><span class="at"> OR</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="at">        </span><span class="fu">question</span><span class="kw">:</span><span class="at"> </span><span class="st">"Is the company showing strong signs of profitability?"</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="at">        </span><span class="fu">nodes</span><span class="kw">:</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="at">          </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> FIN1</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="at">            </span><span class="fu">question</span><span class="kw">:</span><span class="at"> </span><span class="st">"Company demonstrates consistent, high revenue growth."</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co"># ... and so on</span></span></code></pre></div>
<p>To load a tree from a YAML file, use the
<code><a href="../reference/load_tree_yaml.html">load_tree_yaml()</a></code> function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This code shows how to load a YAML file from the package's example data</span></span>
<span><span class="va">yaml_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ethical.yml"</span>, package <span class="op">=</span> <span class="st">"andorR"</span><span class="op">)</span></span>
<span><span class="va">tree_from_yaml</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tree_yaml.html">load_tree_yaml</a></span><span class="op">(</span><span class="va">yaml_path</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the loaded tree</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tree_from_yaml</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="json-format">JSON format<a class="anchor" aria-label="anchor" href="#json-format"></a>
</h3>
<p>An excerpt from a JSON file (<code>ethical.json</code>) looks like
this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"Invest in Company X"</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="dt">"rule"</span><span class="fu">:</span> <span class="st">"AND"</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>  <span class="dt">"nodes"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"Financial Viability"</span><span class="fu">,</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>      <span class="dt">"rule"</span><span class="fu">:</span> <span class="st">"AND"</span><span class="fu">,</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>      <span class="dt">"nodes"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>          <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"Profitability and Growth Signals"</span><span class="fu">,</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>          <span class="dt">"rule"</span><span class="fu">:</span> <span class="st">"OR"</span><span class="fu">,</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>          <span class="dt">"question"</span><span class="fu">:</span> <span class="st">"Is the company showing strong signs of profitability?"</span><span class="fu">,</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>          <span class="dt">"nodes"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>              <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"FIN1"</span><span class="fu">,</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>              <span class="dt">"question"</span><span class="fu">:</span> <span class="st">"Company demonstrates consistent, high revenue growth."</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>            <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="er">#</span> <span class="er">...</span> <span class="er">and</span> <span class="er">so</span> <span class="er">on</span></span></code></pre></div>
<p>To load a tree from a JSON file, use the
<code><a href="../reference/load_tree_json.html">load_tree_json()</a></code> function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This code shows how to load a JSON file from the package's example data</span></span>
<span><span class="va">json_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ethical.json"</span>, package <span class="op">=</span> <span class="st">"andorR"</span><span class="op">)</span></span>
<span><span class="va">tree_from_json</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tree_json.html">load_tree_json</a></span><span class="op">(</span><span class="va">json_path</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the loaded tree</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tree_from_json</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="the-relational-idparent-format">2. The Relational (ID/Parent) Format<a class="anchor" aria-label="anchor" href="#the-relational-idparent-format"></a>
</h2>
<p>This is a flat, tabular format common in spreadsheets and databases.
The tree structure is defined by a <code>parent</code> column that
contains the <code>id</code> of its parent node. This is also the format
of the <code>ethical</code> dataset included in the package.</p>
<p><strong>Required Fields:</strong></p>
<ul>
<li>
<code>id</code>: A unique numeric ID for every node. The root must
have <code>id = 0</code>.</li>
<li>
<code>name</code>: The name/code for the node.</li>
<li>
<code>parent</code>: The <code>id</code> of the parent node. The
root’s parent should be <code>NA</code>.</li>
<li>
<code>rule</code> : Required for parent nodes, can be
<strong>AND</strong> or <strong>OR</strong>
</li>
<li>
<code>question</code> : Required for leaf nodes</li>
</ul>
<p>The first few rows of the <code>ethical</code> dataset look like
this:</p>
<table style="width:100%;" class="table">
<caption>Example of the Relational (ID/Parent) Format</caption>
<colgroup>
<col width="2%">
<col width="32%">
<col width="53%">
<col width="4%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="right">id</th>
<th align="left">name</th>
<th align="left">question</th>
<th align="left">rule</th>
<th align="right">parent</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">Invest in Company X</td>
<td align="left">NA</td>
<td align="left">AND</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Financial Viability</td>
<td align="left">NA</td>
<td align="left">AND</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">Acceptable Environmental Stewardship</td>
<td align="left">NA</td>
<td align="left">OR</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">Demonstrable Social Responsibility</td>
<td align="left">NA</td>
<td align="left">OR</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">Strong Corporate Governance</td>
<td align="left">NA</td>
<td align="left">AND</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">Profitability and Growth Signals</td>
<td align="left">NA</td>
<td align="left">OR</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="left">Solvency and Stability</td>
<td align="left">NA</td>
<td align="left">AND</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="left">FIN1</td>
<td align="left">Company demonstrates consistent, high revenue
growth.</td>
<td align="left">NA</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="left">FIN2</td>
<td align="left">Company maintains a high net profit margin for its
industry.</td>
<td align="left">NA</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="left">FIN3</td>
<td align="left">Company holds a dominant or rapidly growing market
share.</td>
<td align="left">NA</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
<p>To load this format, you can use <code><a href="../reference/load_tree_df.html">load_tree_df()</a></code> if you
already have a data frame, or <code><a href="../reference/load_tree_csv.html">load_tree_csv()</a></code> to read it
from a <code>.csv</code> file.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the example 'ethical' data frame that comes with the package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ethical</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build the tree from the data frame object</span></span>
<span><span class="va">tree_from_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tree_df.html">load_tree_df</a></span><span class="op">(</span><span class="va">ethical</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The structure is identical to the one loaded from YAML</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tree_from_df</span><span class="op">$</span><span class="va">children</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">name</span><span class="op">)</span> <span class="co"># Prints "Financial Viability"</span></span>
<span><span class="co">#&gt; [1] "Financial Viability"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-path-string-format">3. The Path String Format<a class="anchor" aria-label="anchor" href="#the-path-string-format"></a>
</h2>
<p>This is another flat-file format that is very robust. The hierarchy
is defined by a single <code>path</code> column that contains the full,
delimited path from the root to each node.</p>
<p><strong>Required Fields:</strong></p>
<ul>
<li>
<code>path</code>: A string with a character (like <code>/</code>)
separating the names of the nodes in the hierarchy.</li>
<li>
<code>question</code>: Required for leaves, NA for parent
nodes.</li>
<li>
<code>rule</code>: Required for parent nodes, NA for leaves.</li>
</ul>
<p>An excerpt from a CSV file in this format would look like this:</p>
<table class="table">
<caption>Example of the Path String Format</caption>
<colgroup>
<col width="93%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">path</th>
<th align="left">rule</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Invest in Company X</td>
<td align="left">AND</td>
</tr>
<tr class="even">
<td align="left">Invest in Company X/Financial Viability</td>
<td align="left">AND</td>
</tr>
<tr class="odd">
<td align="left">Invest in Company X/Financial Viability/Profitability
and Growth Signals</td>
<td align="left">OR</td>
</tr>
<tr class="even">
<td align="left">Invest in Company X/Financial Viability/Profitability
and Growth Signals/FIN1</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>To load this format from a CSV file, use the
<code><a href="../reference/load_tree_csv_path.html">load_tree_csv_path()</a></code> function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This code shows how to load a path string CSV from the package's example data</span></span>
<span><span class="va">path_csv_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ethical_path.csv"</span>, package <span class="op">=</span> <span class="st">"andorR"</span><span class="op">)</span></span>
<span><span class="va">tree_from_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tree_csv_path.html">load_tree_csv_path</a></span><span class="op">(</span><span class="va">path_csv_path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tree_from_path</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="summary-of-formats">Summary of Formats<a class="anchor" aria-label="anchor" href="#summary-of-formats"></a>
</h3>
<p><img src="formats.svg" alt="Diagram showing relationships between different formats" width="100%"></p>
<table class="table">
<colgroup>
<col width="25%">
<col width="25%">
<col width="25%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="left">Format Name</th>
<th align="left">Best For</th>
<th align="left">Key Structure</th>
<th align="left">Core Loading Function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Hierarchical</strong></td>
<td align="left">Manual creation, readability, version control
(git)</td>
<td align="left">Indented YAML or JSON file with a <code>nodes</code>
key</td>
<td align="left">
<code><a href="../reference/load_tree_yaml.html">load_tree_yaml()</a></code> or
<code><a href="../reference/load_tree_json.html">load_tree_json()</a></code>
</td>
</tr>
<tr class="even">
<td align="left"><strong>Relational</strong></td>
<td align="left">Exporting from databases, spreadsheets (Excel)</td>
<td align="left">A flat table with <code>id</code> and
<code>parent</code> columns</td>
<td align="left"><code><a href="../reference/load_tree_csv.html">load_tree_csv()</a></code></td>
</tr>
<tr class="odd">
<td align="left"><strong>Path String</strong></td>
<td align="left">Programmatic generation, ensuring structural
integrity</td>
<td align="left">A flat table with a single <code>path</code>
column</td>
<td align="left"><code><a href="../reference/load_tree_csv_path.html">load_tree_csv_path()</a></code></td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Angus R Cameron, EpiMundi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
